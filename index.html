<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>LA MAYORISTA EXPRESS</title>

<meta name="theme-color" content="#ff4d00">
<meta name="description" content="LA MAYORISTA EXPRESS - Marketplace mayorista estilo Temu en Cuba">

<link rel="manifest" href='data:application/json,{
 "name":"LA MAYORISTA EXPRESS",
 "short_name":"MAYORISTA",
 "start_url":".",
 "display":"standalone",
 "background_color":"#ffffff",
 "theme_color":"#ff4d00"
}'>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto}
body{background:#f4f4f4;color:#222}

/* HEADER */
header{position:fixed;top:0;left:0;right:0;background:#ff4d00;color:#fff;z-index:1000;padding:12px}
header h1{text-align:center;font-size:22px;font-weight:900}
.header-row{display:flex;gap:8px;margin-top:10px}
.header-row input{flex:1;padding:12px;border-radius:30px;border:none;font-size:15px}
.header-row select,.cart-btn{padding:12px;border-radius:30px;border:none;font-weight:800}
.cart-btn{background:#fff;color:#ff4d00}

/* MARQUEE */
.marquee{margin-top:10px;overflow:hidden;white-space:nowrap}
.marquee span{display:inline-block;padding-left:100%;animation:mar 18s linear infinite;font-weight:700}
@keyframes mar{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

/* MAIN */
main{padding-top:170px;padding-bottom:80px}
.products{display:grid;grid-template-columns:1fr;gap:22px;padding:16px}

/* PRODUCT CARD (EXTRA LARGE TEMU STYLE) */
.card{
 background:#fff;
 border-radius:26px;
 padding:22px;
 box-shadow:0 10px 26px rgba(0,0,0,.15);
 transition:.25s;
}
.card h3{font-size:22px;font-weight:900;margin-bottom:6px}
.card small{opacity:.7;font-size:14px}
.price{font-size:26px;font-weight:900;color:#ff4d00;margin:14px 0}
.controls{display:flex;justify-content:space-between;align-items:center}
.controls button{
 width:54px;height:54px;
 border:none;border-radius:50%;
 background:#ff4d00;color:#fff;
 font-size:26px;font-weight:900
}
.controls span{font-size:20px;font-weight:800}

/* DRAWER */
.drawer{
 position:fixed;top:0;left:-100%;
 width:100%;height:100%;
 background:#fff;z-index:2000;
 transition:.35s;padding:18px;overflow:auto
}
.drawer.open{left:0}
.drawer h2{text-align:center;margin-bottom:14px;font-size:22px}
.drawer-item{display:flex;justify-content:space-between;margin:8px 0;font-size:15px}
.total{font-size:22px;font-weight:900;margin:14px 0}

/* FORM */
.form-group{margin:10px 0}
.form-group input,.form-group select{
 width:100%;padding:12px;
 border-radius:14px;border:1px solid #ccc
}

/* INVOICE */
.invoice{
 background:#f1f1f1;
 border-radius:14px;
 padding:14px;
 margin-top:12px;
 display:none;
 font-size:14px;
 white-space:pre-line
}
.invoice.show{display:block}

/* ANNOUNCE */
.announce{
 position:fixed;bottom:24px;left:50%;
 transform:translateX(-50%);
 background:#ff4d00;color:#fff;
 padding:14px 22px;
 border-radius:30px;
 font-weight:800;
 display:none;z-index:3000
}
</style>
</head>

<body>

<header>
<h1>LA MAYORISTA EXPRESS</h1>
<div class="header-row">
<input id="search" placeholder="Buscar productos...">
<select id="currency">
<option value="CUP">CUP</option>
<option value="USD">USD</option>
<option value="MLC">MLC</option>
<option value="TC">Tarjeta ClÃ¡sica</option>
<option value="CRYPTO">Criptomoneda</option>
</select>
<button class="cart-btn" onclick="toggleCart()">ðŸ›’ <span id="cartTotal">0</span></button>
</div>
<div class="marquee">
<span>ðŸ”¥ Precios mayoristas reales â€¢ ðŸšš Entregas rÃ¡pidas â€¢ ðŸ’° Ahorra comprando mÃ¡s â€¢ ðŸ›’ Compra segura</span>
</div>
</header>

<main>
<div class="products" id="products"></div>
</main>

<div class="drawer" id="cart">
<h2>Carrito</h2>
<div id="cartItems"></div>
<div class="total" id="cartSum"></div>
<button onclick="clearCart()">Vaciar carrito</button>

<h3>Datos del cliente</h3>
<div class="form-group"><input id="name" placeholder="Nombre completo"></div>
<div class="form-group"><input id="phone" placeholder="TelÃ©fono"></div>
<div class="form-group"><input id="address" placeholder="DirecciÃ³n"></div>
<div class="form-group">
<select id="pay">
<option>Efectivo</option>
<option>Transferencia</option>
<option>MLC</option>
<option>Criptomoneda</option>
</select>
</div>
<div class="form-group">
<select id="delivery">
<option>MensajerÃ­a</option>
<option>Recoger en tienda</option>
</select>
</div>

<button onclick="toggleInvoice()">Ver / Ocultar factura</button>
<div class="invoice" id="invoice"></div>

<button onclick="sendWhatsApp()">Enviar pedido por WhatsApp</button>
<button onclick="toggleCart()">Cerrar</button>
</div>

<div class="announce" id="announce"></div>

<script>
/* TASAS */
const rates={CUP:1,USD:495,MLC:410,TC:410,CRYPTO:495};

/* PRODUCTOS EXACTAMENTE 60 */
const products=[
["ðŸš Saco de Arroz (100 lb)","Saco",13600],
["ðŸ«˜ Frijol negro","Libra",224],
["ðŸ«˜ Frijol colorado","Libra",240],
["ðŸ¬ AzÃºcar","Libra",184],
["ðŸŒ½ Harina de maÃ­z","Libra",120],
["ðŸŒ½ MaÃ­z en grano","Libra",112],
["ðŸ Espagueti 500 g","Unidad",224],
["ðŸ— Pollo","Libra",256],
["ðŸ– Carne de cerdo","Libra",520],
["ðŸ¥© Picadillo","Libra",320],
["ðŸ¥š CartÃ³n de huevos (30)","CartÃ³n",2240],
["ðŸ¥› Leche en polvo","Kilo",2800],
["ðŸ§€ Queso blanco","Libra",2240],
["ðŸ›¢ï¸ Aceite","Litro",560],
["ðŸ§º Detergente polvo","Kilo",560],
["ðŸ§´ Detergente lÃ­quido","Litro",600],
["ðŸ§¼ JabÃ³n de baÃ±o","Unidad",200],
["ðŸ§» Papel higiÃ©nico","Paquete",704],
["ðŸ§… Cebolla","Libra",240],
["ðŸ… Tomate","Libra",160],
["ðŸ¥” Papa","Libra",160],
["ðŸŒ PlÃ¡tano vianda","Libra",96],
["ðŸž Pan","Unidad",120],
["ðŸ§‚ Sal","Libra",80],
["ðŸ¥• Zanahoria","Libra",160],
["ðŸ¥¬ Col","Libra",144],
["ðŸŠ Naranja","Libra",96],
["ðŸ PiÃ±a","Unidad",400],
["ðŸ‰ MelÃ³n","Unidad",480],
["ðŸ« Chocolate","Unidad",320],
["ðŸª Galletas","Paquete",200],
["ðŸ¥« AtÃºn","Unidad",560],
["ðŸ¥« Sardinas","Unidad",320],
["ðŸ— Muslo de pollo","Libra",280],
["ðŸ– Costilla de cerdo","Libra",560],
["ðŸ„ Carne de res","Libra",960],
["ðŸ¥“ Tocino","Libra",640],
["ðŸ§½ Esponja","Unidad",120],
["ðŸ§´ Cloro","Litro",200],
["ðŸ§¼ Shampoo","Unidad",600],
["ðŸª¥ Pasta dental","Unidad",320],
["ðŸ§º JabÃ³n lavar","Libra",240],
["ðŸ§´ Alcohol","Litro",400],
["ðŸª£ Cubo plÃ¡stico","Unidad",600],
["ðŸ§ƒ Jugo","Unidad",240],
["ðŸ¥¤ Refresco","Unidad",200],
["ðŸ¯ Miel","Unidad",600],
["ðŸ§ˆ Margarina","Unidad",320],
["ðŸ§‚ Condimento","Unidad",160],
["ðŸš Harina de trigo","Libra",160],
["ðŸ¥› Leche lÃ­quida","Litro",240],
["ðŸ§¼ Suavizante","Litro",480],
["ðŸª Dulce seco","Paquete",180],
["ðŸ§´ Desodorante","Unidad",520],
["ðŸ§» Servilletas","Paquete",240]
];

let cart=JSON.parse(localStorage.getItem("cart")||"{}");
let currency=localStorage.getItem("currency")||"CUP";
let invoiceVisible=localStorage.getItem("invoice")==="1";

currencySelect.value=currency;

/* CONVERSIÃ“N */
function convert(value){
 if(currency==="CUP")return value.toFixed(0)+" CUP";
 return (value/rates[currency]).toFixed(2)+" "+currency;
}

/* RENDER */
function render(){
 productsBox.innerHTML="";
 products.forEach((p,i)=>{
  if(search.value && !p[0].toLowerCase().includes(search.value.toLowerCase()))return;
  const q=cart[i]||0;
  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`
   <h3>${p[0]}</h3>
   <small>${p[1]}</small>
   <div class="price">${convert(p[2])}</div>
   <div class="controls">
    <button onclick="add(${i},-1)">âž–</button>
    <span>${q}</span>
    <button onclick="add(${i},1)">âž•</button>
   </div>`;
  productsBox.appendChild(card);
 });
 updateCart();
}

/* CART LOGIC */
function add(i,d){
 cart[i]=(cart[i]||0)+d;
 if(cart[i]<0)cart[i]=0;
 save();
}
function save(){
 localStorage.setItem("cart",JSON.stringify(cart));
 localStorage.setItem("currency",currency);
 localStorage.setItem("invoice",invoiceVisible?1:0);
 render();
}
function clearCart(){cart={};save();}
function toggleCart(){cartDiv.classList.toggle("open");}
function toggleInvoice(){invoiceVisible=!invoiceVisible;invoice.classList.toggle("show");save();}

/* UPDATE CART + FACTURA */
function updateCart(){
 let sum=0,items="",rows="";
 Object.keys(cart).forEach(i=>{
  if(cart[i]>0){
   const p=products[i];
   const sub=p[2]*cart[i];
   sum+=sub;
   items+=`<div class="drawer-item">${p[0]} x${cart[i]} <span>${convert(sub)}</span></div>`;
   rows+=`${p[0]} | Cantidad: ${cart[i]} | Precio: ${convert(p[2])} | Subtotal: ${convert(sub)}\n`;
  }
 });
 const envio=delivery.value==="MensajerÃ­a"?500:0;
 cartItems.innerHTML=items;
 cartSum.innerText="TOTAL: "+convert(sum+envio);
 cartTotal.innerText=convert(sum+envio);

 invoice.innerText=
`LA MAYORISTA EXPRESS
Fecha: ${new Date().toLocaleDateString()}

CLIENTE
Nombre: ${name.value}
TelÃ©fono: ${phone.value}
DirecciÃ³n: ${address.value}

PRODUCTOS
${rows}

SUBTOTAL: ${convert(sum)}
ENVÃO: ${convert(envio)}
TOTAL FINAL: ${convert(sum+envio)}

FORMA DE PAGO: ${pay.value}
ENTREGA: ${delivery.value}`;
}

/* WHATSAPP */
function sendWhatsApp(){
 const msg=encodeURIComponent(invoice.innerText);
 window.open("https://wa.me/53420021?text="+msg,"_blank");
}

/* EVENTS */
search.oninput=render;
currencySelect.onchange=e=>{currency=e.target.value;save();}
[name,phone,address,pay,delivery].forEach(el=>el.oninput=save);

/* ANNOUNCES */
setInterval(()=>{
 const msgs=[
 "ðŸ”¥ Ofertas mayoristas activas",
 "ðŸšš EnvÃ­os rÃ¡pidos disponibles",
 "ðŸ’° Compra mÃ¡s y ahorra mÃ¡s"
 ];
 announce.innerText=msgs[Math.floor(Math.random()*msgs.length)];
 announce.style.display="block";
 setTimeout(()=>announce.style.display="none",3000);
},[20000,30000,60000][Math.floor(Math.random()*3)]);

/* INIT */
const productsBox=document.getElementById("products");
const cartDiv=document.getElementById("cart");
const invoice=document.getElementById("invoice");
const cartItems=document.getElementById("cartItems");
const cartSum=document.getElementById("cartSum");
const cartTotal=document.getElementById("cartTotal");
const currencySelect=document.getElementById("currency");
const search=document.getElementById("search");
const announce=document.getElementById("announce");
const name=document.getElementById("name");
const phone=document.getElementById("phone");
const address=document.getElementById("address");
const pay=document.getElementById("pay");
const delivery=document.getElementById("delivery");

if(invoiceVisible)invoice.classList.add("show");
render();

/* SERVICE WORKER */
if("serviceWorker"in navigator){
 const sw=`self.addEventListener('install',e=>self.skipWaiting());
 self.addEventListener('fetch',e=>{});`;
 navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:"text/javascript"})));
}
</script>

</body>
</html>
