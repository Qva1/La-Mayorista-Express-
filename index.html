<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LA MAYORISTA EXPRESS</title>
<meta name="theme-color" content="#ff5a00">
<meta name="description" content="LA MAYORISTA EXPRESS - Marketplace mayorista en Cuba">
<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;LA MAYORISTA EXPRESS&quot;,
  &quot;short_name&quot;:&quot;MAYORISTA&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#ffffff&quot;,
  &quot;theme_color&quot;:&quot;#ff5a00&quot;
}">
<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif}
body{background:#f6f6f6;color:#222}
header{position:fixed;top:0;left:0;right:0;z-index:10;background:#ff5a00;color:#fff;padding:10px}
header h1{font-size:18px;text-align:center;font-weight:700}
.header-row{display:flex;gap:6px;margin-top:6px}
header input,header select{flex:1;border:none;border-radius:12px;padding:8px;font-size:14px}
#cartBtn{background:#fff;color:#ff5a00;border-radius:12px;padding:8px 10px;font-weight:700}
#marquee{margin-top:90px;background:#fff3e6;color:#ff5a00;overflow:hidden;white-space:nowrap}
#marquee span{display:inline-block;padding-left:100%;animation:mar 18s linear infinite}
@keyframes mar{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}
#products{padding:10px;margin-top:10px;display:grid;grid-template-columns:1fr;gap:14px}
.product{background:#fff;border-radius:20px;padding:16px;box-shadow:0 6px 14px rgba(0,0,0,.08);animation:fade .3s}
.product h3{font-size:18px}
.product .price{font-size:22px;font-weight:800;color:#ff5a00;margin:8px 0}
.controls{display:flex;align-items:center;gap:10px}
.controls button{width:44px;height:44px;border:none;border-radius:50%;font-size:22px;font-weight:700}
.controls span{min-width:30px;text-align:center;font-size:18px}
.plus{background:#ff5a00;color:#fff}
.minus{background:#eee}
#drawer{position:fixed;top:0;left:-100%;width:85%;height:100%;background:#fff;z-index:20;transition:.3s;padding:12px;overflow:auto}
#drawer.open{left:0}
.drawer-header{display:flex;justify-content:space-between;align-items:center}
.drawer-header h2{font-size:18px}
.drawer-header button{border:none;background:#ff5a00;color:#fff;border-radius:10px;padding:6px 10px}
.cart-item{border-bottom:1px solid #eee;padding:6px 0;font-size:14px}
.cart-item button{background:red;color:#fff;border:none;border-radius:6px;padding:2px 6px}
.total{font-weight:800;font-size:18px;margin-top:10px}
form input,form select{width:100%;margin:6px 0;padding:8px;border-radius:10px;border:1px solid #ccc}
form button{width:100%;padding:12px;border:none;border-radius:16px;background:#25D366;color:#fff;font-size:16px;font-weight:700;margin-top:8px}
#invoice{display:none;background:#f9f9f9;padding:10px;border-radius:10px;margin-top:10px;font-size:14px}
#ad{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#ff5a00;color:#fff;padding:10px 16px;border-radius:16px;display:none;z-index:30;animation:fade .4s}
@keyframes fade{from{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}
</style>
</head>
<body>

<header>
  <h1>LA MAYORISTA EXPRESS</h1>
  <div class="header-row">
    <input id="search" placeholder="Buscar productos">
    <select id="currency">
      <option value="CUP">CUP</option>
      <option value="USD">USD</option>
      <option value="MLC">MLC</option>
      <option value="TC">Tarjeta ClÃ¡sica</option>
      <option value="CRYPTO">Criptomoneda</option>
    </select>
    <button id="cartBtn">ðŸ›’ <span id="cartTotal">0</span></button>
  </div>
</header>

<div id="marquee">
  <span>ðŸ”¥ Ofertas mayoristas â€¢ ðŸšš EnvÃ­os rÃ¡pidos â€¢ ðŸ’° Precios reales del mercado informal â€¢ ðŸ“¦ Compra segura</span>
</div>

<div id="products"></div>

<div id="drawer">
  <div class="drawer-header">
    <h2>Carrito</h2>
    <button onclick="toggleCart()">Cerrar</button>
  </div>
  <div id="cartItems"></div>
  <div class="total">Total: <span id="total"></span></div>

  <button onclick="toggleInvoice()">Ver / Ocultar factura</button>
  <div id="invoice"></div>

  <form id="clientForm">
    <input id="name" placeholder="Nombre completo" required>
    <input id="phone" placeholder="TelÃ©fono" required>
    <input id="address" placeholder="DirecciÃ³n" required>
    <select id="payment">
      <option>Efectivo</option>
      <option>Transferencia</option>
      <option>Criptomoneda</option>
    </select>
    <select id="delivery">
      <option>MensajerÃ­a</option>
      <option>Recoger en tienda</option>
    </select>
    <button type="button" onclick="sendWhatsApp()">Enviar pedido por WhatsApp</button>
  </form>
</div>

<div id="ad"></div>

<script>
const rates={CUP:1,USD:495,MLC:410,TC:410,CRYPTO:495};
const products=[
{e:"ðŸš",n:"Saco de Arroz (100 lb)",u:"saco",p:13600,m:1},
{e:"ðŸ«˜",n:"Frijol negro",u:"lb",p:224,m:5},
{e:"ðŸ«˜",n:"Frijol colorado",u:"lb",p:240,m:5},
{e:"ðŸ¬",n:"AzÃºcar",u:"lb",p:184,m:10},
{e:"ðŸŒ½",n:"Harina de maÃ­z",u:"lb",p:120,m:5},
{e:"ðŸŒ½",n:"MaÃ­z en grano",u:"lb",p:112,m:5},
{e:"ðŸ",n:"Espagueti (500 g)",u:"paq",p:224,m:5},
{e:"ðŸ—",n:"Pollo",u:"lb",p:256,m:5},
{e:"ðŸ–",n:"Carne de cerdo",u:"lb",p:520,m:5},
{e:"ðŸ¥©",n:"Picadillo",u:"lb",p:320,m:5},
{e:"ðŸ¥š",n:"CartÃ³n de huevos (30)",u:"cartÃ³n",p:2240,m:1},
{e:"ðŸ¥›",n:"Leche en polvo",u:"kg",p:2800,m:1},
{e:"ðŸ§€",n:"Queso blanco",u:"lb",p:2240,m:1},
{e:"ðŸ›¢ï¸",n:"Aceite",u:"litro",p:560,m:2},
{e:"ðŸ§¼",n:"Detergente polvo",u:"kg",p:560,m:2},
{e:"ðŸ§´",n:"Detergente lÃ­quido",u:"litro",p:600,m:2},
{e:"ðŸ§¼",n:"JabÃ³n de baÃ±o",u:"unidad",p:200,m:6},
{e:"ðŸ§»",n:"Papel higiÃ©nico",u:"paq",p:704,m:1},
{e:"ðŸ§…",n:"Cebolla",u:"lb",p:240,m:5},
{e:"ðŸ…",n:"Tomate",u:"lb",p:160,m:5},
{e:"ðŸ¥”",n:"Papa",u:"lb",p:160,m:5},
{e:"ðŸŒ",n:"PlÃ¡tano vianda",u:"lb",p:96,m:10},
/* productos adicionales hasta 60 */
{e:"ðŸ¥•",n:"Zanahoria",u:"lb",p:140,m:5},
{e:"ðŸ¥¬",n:"Col",u:"lb",p:120,m:5},
{e:"ðŸŒ¶ï¸",n:"AjÃ­",u:"lb",p:200,m:3},
{e:"ðŸ§‚",n:"Sal",u:"lb",p:80,m:5},
{e:"â˜•",n:"CafÃ©",u:"lb",p:1600,m:1},
{e:"ðŸª",n:"Galletas",u:"paq",p:180,m:5},
{e:"ðŸ§ƒ",n:"Refresco",u:"litro",p:200,m:6},
{e:"ðŸ¥«",n:"Salsa de tomate",u:"paq",p:160,m:5},
{e:"ðŸŸ",n:"Pescado",u:"lb",p:360,m:5},
{e:"ðŸ–",n:"Costilla de cerdo",u:"lb",p:480,m:5},
{e:"ðŸ¥“",n:"Tocino",u:"lb",p:420,m:3},
{e:"ðŸ§ˆ",n:"Manteca",u:"lb",p:300,m:3},
{e:"ðŸ¯",n:"Miel",u:"lb",p:520,m:2},
{e:"ðŸž",n:"Pan",u:"paq",p:120,m:5},
{e:"ðŸ§ƒ",n:"Jugo en polvo",u:"paq",p:80,m:10},
{e:"ðŸ§½",n:"Esponja",u:"unidad",p:100,m:5},
{e:"ðŸª£",n:"Cloro",u:"litro",p:120,m:3},
{e:"ðŸ§´",n:"Suavizante",u:"litro",p:480,m:2},
{e:"ðŸ§¼",n:"JabÃ³n lavar",u:"unidad",p:180,m:4},
{e:"ðŸ§¹",n:"Escoba",u:"unidad",p:600,m:1},
{e:"ðŸ§»",n:"Servilletas",u:"paq",p:160,m:3},
{e:"ðŸª¥",n:"Pasta dental",u:"unidad",p:240,m:2},
{e:"ðŸ§´",n:"ChampÃº",u:"unidad",p:520,m:1},
{e:"ðŸ§´",n:"Acondicionador",u:"unidad",p:520,m:1},
{e:"ðŸ§¼",n:"Lavaplatos",u:"litro",p:400,m:2},
{e:"ðŸ§ƒ",n:"Leche lÃ­quida",u:"litro",p:240,m:6},
{e:"ðŸ«",n:"Chocolate",u:"unidad",p:200,m:3}
];

let cart=JSON.parse(localStorage.getItem("cart")||"{}");
let currency=localStorage.getItem("currency")||"CUP";

const productsDiv=document.getElementById("products");
const cartItems=document.getElementById("cartItems");
document.getElementById("currency").value=currency;

function renderProducts(){
 productsDiv.innerHTML="";
 const q=document.getElementById("search").value.toLowerCase();
 products.filter(p=>p.n.toLowerCase().includes(q)).forEach((p,i)=>{
  const qty=cart[i]||0;
  const price=(p.p/rates[currency]).toFixed(2);
  productsDiv.innerHTML+=`
   <div class="product">
    <h3>${p.e} ${p.n}</h3>
    <div>${p.u} â€¢ MÃ­n ${p.m}</div>
    <div class="price">${price} ${currency}</div>
    <div class="controls">
      <button class="minus" onclick="add(${i},-${p.m})">âž–</button>
      <span>${qty}</span>
      <button class="plus" onclick="add(${i},${p.m})">âž•</button>
    </div>
   </div>`;
 });
}

function add(i,v){
 cart[i]=(cart[i]||0)+v;
 if(cart[i]<0) cart[i]=0;
 save(); renderProducts(); renderCart();
}

function renderCart(){
 cartItems.innerHTML="";
 let totalCUP=0;
 Object.keys(cart).forEach(i=>{
  if(cart[i]>0){
   const p=products[i];
   const sub=cart[i]*p.p;
   totalCUP+=sub;
   cartItems.innerHTML+=`
    <div class="cart-item">
     ${p.n} x ${cart[i]} = ${(sub/rates[currency]).toFixed(2)} ${currency}
     <button onclick="del(${i})">X</button>
    </div>`;
  }
 });
 document.getElementById("total").textContent=(totalCUP/rates[currency]).toFixed(2)+" "+currency;
 document.getElementById("cartTotal").textContent=(totalCUP/rates[currency]).toFixed(2);
}

function del(i){delete cart[i];save();renderProducts();renderCart()}
function toggleCart(){document.getElementById("drawer").classList.toggle("open");save()}
function toggleInvoice(){
 const inv=document.getElementById("invoice");
 inv.style.display=inv.style.display==="block"?"none":"block";
 inv.innerHTML=generateInvoice();
 save();
}

function generateInvoice(){
 let txt=`FACTURA\n\nCliente: ${name.value}\nTelÃ©fono: ${phone.value}\nDirecciÃ³n: ${address.value}\n\nProductos:\n`;
 let total=0;
 Object.keys(cart).forEach(i=>{
  if(cart[i]>0){
   const p=products[i];
   const s=cart[i]*p.p;
   total+=s;
   txt+=`${p.n} | ${cart[i]} | ${(s/rates[currency]).toFixed(2)} ${currency}\n`;
  }
 });
 txt+=`\nTotal: ${(total/rates[currency]).toFixed(2)} ${currency}\nPago: ${payment.value}\nEntrega: ${delivery.value}`;
 return txt.replace(/\n/g,"<br>");
}

function sendWhatsApp(){
 const msg=encodeURIComponent(generateInvoice().replace(/<br>/g,"\n"));
 window.open(`https://wa.me/53420021?text=${msg}`);
}

function save(){
 localStorage.setItem("cart",JSON.stringify(cart));
 localStorage.setItem("currency",currency);
}

document.getElementById("search").oninput=renderProducts;
document.getElementById("currency").onchange=e=>{currency=e.target.value;save();renderProducts();renderCart()};
document.getElementById("cartBtn").onclick=toggleCart;

renderProducts();renderCart();

/* anuncios */
const ads=["ðŸ”¥ Grandes descuentos","ðŸšš EnvÃ­os rÃ¡pidos","ðŸ’° Precios reales","ðŸ“¦ Compra segura"];
let ai=0;
setInterval(()=>{
 const ad=document.getElementById("ad");
 ad.textContent=ads[ai++%ads.length];
 ad.style.display="block";
 setTimeout(()=>ad.style.display="none",3000);
},20000);

/* service worker */
if("serviceWorker" in navigator){
 const sw=`
 self.addEventListener('install',e=>self.skipWaiting());
 self.addEventListener('fetch',e=>{});
 `;
 navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:'text/javascript'})));
}
</script>
</body>
</html>
