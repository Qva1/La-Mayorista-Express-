<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>LA MAYORISTA EXPRESS</title>

<link rel="manifest" href="data:application/json,{
  &quot;name&quot;:&quot;LA MAYORISTA EXPRESS&quot;,
  &quot;short_name&quot;:&quot;MAYORISTA&quot;,
  &quot;start_url&quot;:&quot;.&quot;,
  &quot;display&quot;:&quot;standalone&quot;,
  &quot;background_color&quot;:&quot;#ff5a00&quot;,
  &quot;theme_color&quot;:&quot;#ff5a00&quot;
}">

<style>
:root{
  --primary:#ff5a00;
  --bg:#f6f6f6;
  --card:#ffffff;
  --text:#222;
}
*{box-sizing:border-box}
body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto;
  background:var(--bg);
  color:var(--text);
}
header{
  position:fixed;
  top:0;
  left:0;
  right:0;
  background:var(--primary);
  color:white;
  z-index:10;
}
header .top{
  display:flex;
  align-items:center;
  padding:10px;
  gap:8px;
}
header h1{
  font-size:16px;
  margin:0;
  flex:1;
}
header input{
  flex:2;
  padding:8px;
  border-radius:8px;
  border:none;
}
header select{
  padding:6px;
  border-radius:8px;
  border:none;
}
.marquee{
  background:#ff7a33;
  white-space:nowrap;
  overflow:hidden;
}
.marquee span{
  display:inline-block;
  padding-left:100%;
  animation:marquee 15s linear infinite;
}
@keyframes marquee{
  from{transform:translateX(0)}
  to{transform:translateX(-100%)}
}

main{
  padding:120px 10px 80px;
}
.grid{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:10px;
}
.card{
  background:var(--card);
  border-radius:16px;
  padding:12px;
  box-shadow:0 2px 6px rgba(0,0,0,.1);
  display:flex;
  flex-direction:column;
  gap:6px;
}
.card .name{
  font-size:14px;
  font-weight:600;
}
.card .price{
  font-size:13px;
  color:var(--primary);
}
.controls{
  display:flex;
  align-items:center;
  justify-content:space-between;
}
.controls button{
  background:var(--primary);
  color:white;
  border:none;
  border-radius:10px;
  width:32px;
  height:32px;
  font-size:18px;
}
.controls span{
  font-size:14px;
}

#cartBtn{
  position:fixed;
  bottom:10px;
  right:10px;
  background:var(--primary);
  color:white;
  padding:14px;
  border-radius:50px;
  z-index:20;
}

#drawer{
  position:fixed;
  top:0;
  left:-100%;
  width:85%;
  height:100%;
  background:white;
  z-index:30;
  transition:.3s;
  padding:10px;
  overflow:auto;
}
#drawer.open{left:0}
#drawer h2{margin-top:0}

.cart-item{
  display:flex;
  justify-content:space-between;
  font-size:13px;
}
.cart-item button{
  background:red;
  color:white;
  border:none;
  border-radius:6px;
}

.section{
  margin-top:10px;
  font-size:13px;
}
.section input, .section select{
  width:100%;
  padding:8px;
  margin-top:4px;
}

#invoice{
  display:none;
  background:#f1f1f1;
  padding:10px;
  border-radius:10px;
  font-size:12px;
  margin-top:10px;
}

.ad{
  position:fixed;
  bottom:80px;
  left:50%;
  transform:translateX(-50%);
  background:var(--primary);
  color:white;
  padding:10px 14px;
  border-radius:20px;
  display:none;
  z-index:40;
}
</style>
</head>

<body>

<header>
  <div class="top">
    <h1>LA MAYORISTA EXPRESS</h1>
    <input id="search" placeholder="Buscar producto">
    <select id="currency">
      <option value="CUP">CUP</option>
      <option value="USD">USD</option>
      <option value="MLC">MLC</option>
      <option value="TC">Tarjeta</option>
      <option value="CRYPTO">Cripto</option>
    </select>
  </div>
  <div class="marquee"><span>üì¶ Env√≠os r√°pidos | üí∞ Precios mayoristas | üì≤ Pedidos por WhatsApp</span></div>
</header>

<main>
  <div class="grid" id="products"></div>
</main>

<button id="cartBtn">üõí <span id="total">0</span></button>

<div id="drawer">
  <button onclick="toggleCart()">‚ùå Cerrar</button>
  <h2>Carrito</h2>
  <div id="cartItems"></div>
  <div class="section">Subtotal: <span id="subtotal"></span></div>
  <div class="section">Env√≠o: <span id="shipping"></span></div>
  <div class="section"><b>Total: <span id="final"></span></b></div>
  <button onclick="clearCart()">Vaciar carrito</button>

  <div class="section">
    <h3>Datos del cliente</h3>
    <input id="name" placeholder="Nombre">
    <input id="phone" placeholder="Tel√©fono">
    <input id="address" placeholder="Direcci√≥n">
    <select id="pay">
      <option>Efectivo</option>
      <option>Transferencia</option>
      <option>Cripto</option>
    </select>
    <select id="delivery">
      <option>Mensajer√≠a</option>
      <option>Recoger en tienda</option>
    </select>
  </div>

  <button onclick="toggleInvoice()">Ver factura</button>
  <div id="invoice"></div>

  <button onclick="sendWhatsApp()">Enviar por WhatsApp</button>
</div>

<div class="ad" id="ad"></div>

<script>
if('serviceWorker'in navigator){
  const sw = `
    self.addEventListener('install',e=>self.skipWaiting());
    self.addEventListener('fetch',e=>{});
  `;
  navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:'text/javascript'})));
}

const rates={CUP:1,USD:350,MLC:300,TC:320,CRYPTO:400};
const products=[
{n:"üçö Arroz",p:3000+1000,m:5},{n:"ü´ò Frijoles negros",p:2600,m:3},
{n:"üßÇ Sal",p:600,m:5},{n:"üç¨ Az√∫car",p:1800,m:5},
{n:"üçù Espagueti",p:2200,m:2},{n:"üõ¢Ô∏è Aceite",p:4500,m:1},
{n:"ü•´ Sardinas",p:2500,m:2},{n:"ü•õ Leche en polvo",p:6200,m:1},
{n:"‚òï Caf√©",p:5500,m:1},{n:"üç™ Galletas",p:2000,m:3},
{n:"üßº Jab√≥n",p:900,m:5},{n:"üß¥ Champ√∫",p:2800,m:2},
{n:"ü™• Pasta dental",p:1500,m:3},{n:"üßª Papel sanitario",p:2400,m:2},
{n:"üßΩ Detergente",p:3200,m:1},{n:"üß∫ Suavizante",p:3000,m:1},
{n:"üß¥ Cloro",p:1800,m:2},{n:"üßπ Escoba",p:3500,m:1},
{n:"ü™£ Cubo pl√°stico",p:4200,m:1},{n:"üßä Hielo",p:800,m:5},
{n:"ü•´ Pasta tomate",p:2100,m:2},{n:"üçû Pan",p:1200,m:5},
{n:"ü•ö Huevos",p:3000,m:1},{n:"üçó Pollo",p:7000,m:1},
{n:"üçñ Cerdo",p:7500,m:1},{n:"ü•© Res",p:9000,m:1},
{n:"üçé Manzana",p:1800,m:5},{n:"üçå Pl√°tano",p:1400,m:5},
{n:"ü•î Papa",p:1300,m:5},{n:"üßÖ Cebolla",p:1600,m:5},
{n:"üßÑ Ajo",p:2000,m:2},{n:"ü•ï Zanahoria",p:1500,m:5},
{n:"üå∂Ô∏è Aj√≠",p:1700,m:3},{n:"üçÖ Tomate",p:1600,m:5},
{n:"ü•¨ Lechuga",p:1400,m:3},{n:"üßÉ Refresco",p:2200,m:3},
{n:"üç∫ Cerveza",p:3500,m:3},{n:"üßÉ Jugo",p:2400,m:3},
{n:"üç´ Chocolate",p:3000,m:2},{n:"üçØ Miel",p:4000,m:1},
{n:"üßà Mantequilla",p:4800,m:1},{n:"üßÄ Queso",p:5200,m:1},
{n:"ü•ì Jam√≥n",p:4900,m:1},{n:"ü•´ At√∫n",p:2800,m:2},
{n:"üçö Harina",p:1900,m:5},{n:"ü•ú Man√≠",p:2300,m:3},
{n:"üçø Ma√≠z",p:1700,m:5},{n:"üß¥ Alcohol",p:2600,m:2},
{n:"üß¥ Gel antibacterial",p:2400,m:2},{n:"ü™í Afeitadoras",p:2100,m:3},
{n:"üßª Servilletas",p:1800,m:3},{n:"üßΩ Esponjas",p:1600,m:3}
].map(p=>({...p,p:p.p*0.7}));

let cart=JSON.parse(localStorage.getItem("cart")||"{}");
let currency=localStorage.getItem("currency")||"CUP";

document.getElementById("currency").value=currency;

function render(){
  const g=document.getElementById("products");
  g.innerHTML="";
  products.forEach((p,i)=>{
    const q=cart[i]||0;
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <div class="name">${p.n}</div>
      <div class="price">${price(p.p)}</div>
      <div>M√≠n: ${p.m}</div>
      <div class="controls">
        <button onclick="add(${i},-${p.m})">‚ûñ</button>
        <span>${q}</span>
        <button onclick="add(${i},${p.m})">‚ûï</button>
      </div>`;
    g.appendChild(d);
  });
  save();
  updateCart();
}

function price(v){return (v/rates[currency]).toFixed(2)+" "+currency}
function add(i,d){cart[i]=(cart[i]||0)+d;if(cart[i]<0)delete cart[i];render()}
function toggleCart(){document.getElementById("drawer").classList.toggle("open")}
function save(){localStorage.setItem("cart",JSON.stringify(cart));localStorage.setItem("currency",currency)}
document.getElementById("cartBtn").onclick=toggleCart;
document.getElementById("currency").onchange=e=>{currency=e.target.value;render()}

function updateCart(){
  let s=0;
  const ci=document.getElementById("cartItems");
  ci.innerHTML="";
  Object.keys(cart).forEach(i=>{
    const p=products[i];
    const q=cart[i];
    const l=document.createElement("div");
    l.className="cart-item";
    l.innerHTML=`${p.n} x${q} <button onclick="del(${i})">X</button>`;
    ci.appendChild(l);
    s+=p.p*q;
  });
  document.getElementById("subtotal").innerText=price(s);
  const ship=s>0?500:0;
  document.getElementById("shipping").innerText=price(ship);
  document.getElementById("final").innerText=price(s+ship);
  document.getElementById("total").innerText=price(s+ship);
}
function del(i){delete cart[i];render()}
function clearCart(){cart={};render()}

function toggleInvoice(){
  const inv=document.getElementById("invoice");
  if(inv.style.display=="block"){inv.style.display="none";return}
  let t="";
  Object.keys(cart).forEach(i=>{
    t+=products[i].n+" x"+cart[i]+"\n";
  });
  inv.innerText=
`FACTURA
Cliente: ${name.value}
Tel: ${phone.value}
Direcci√≥n: ${address.value}

Productos:
${t}

Total: ${final.innerText}
Pago: ${pay.value}
Entrega: ${delivery.value}`;
  inv.style.display="block";
}

function sendWhatsApp(){
  const msg=encodeURIComponent(invoice.innerText);
  window.open("https://wa.me/53420021?text="+msg,"_blank");
}

const ads=["üî• Ofertas diarias","üì¶ Entregas r√°pidas","üí∞ Precios mayoristas"];
setInterval(()=>{
  const a=document.getElementById("ad");
  a.innerText=ads[Math.floor(Math.random()*ads.length)];
  a.style.display="block";
  setTimeout(()=>a.style.display="none",3000);
},20000);

render();
</script>
</body>
  </html>
