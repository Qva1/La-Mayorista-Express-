<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
<title>LA MAYORISTA EXPRESS</title>

<meta name="theme-color" content="#ff4d00">
<meta name="description" content="LA MAYORISTA EXPRESS - Marketplace mayorista estilo Temu en Cuba">

<link rel="manifest" href='data:application/json,{
 "name":"LA MAYORISTA EXPRESS",
 "short_name":"MAYORISTA",
 "start_url":".",
 "display":"standalone",
 "background_color":"#ffffff",
 "theme_color":"#ff4d00"
}'>

<style>
*{box-sizing:border-box;margin:0;padding:0;font-family:system-ui,-apple-system,Segoe UI,Roboto}
body{background:#f6f6f6;color:#222}

/* HEADER */
header{position:fixed;top:0;left:0;right:0;background:#ff4d00;color:#fff;z-index:1000;padding:10px}
header h1{text-align:center;font-size:20px;font-weight:800}
.header-row{display:flex;gap:6px;margin-top:8px}
.header-row input{flex:1;padding:10px;border-radius:25px;border:none;font-size:14px}
.header-row select,.cart-btn{padding:10px;border-radius:25px;border:none;font-weight:700}
.cart-btn{background:#fff;color:#ff4d00}

/* MARQUEE */
.marquee{margin-top:8px;overflow:hidden;white-space:nowrap}
.marquee span{display:inline-block;padding-left:100%;animation:mar 18s linear infinite;font-weight:600}
@keyframes mar{0%{transform:translateX(0)}100%{transform:translateX(-100%)}}

/* MAIN */
main{padding-top:150px;padding-bottom:60px}
.products{display:grid;grid-template-columns:1fr;gap:18px;padding:14px}

/* PRODUCT CARD (TEMU STYLE BIG) */
.card{
 background:#fff;
 border-radius:22px;
 padding:18px;
 box-shadow:0 8px 20px rgba(0,0,0,.12);
 transition:.25s
}
.card h3{font-size:20px;font-weight:800;margin-bottom:6px}
.card small{opacity:.7}
.price{font-size:22px;font-weight:900;color:#ff4d00;margin:10px 0}
.controls{display:flex;justify-content:space-between;align-items:center}
.controls button{
 width:44px;height:44px;
 border:none;border-radius:50%;
 background:#ff4d00;color:#fff;
 font-size:22px;font-weight:800
}
.controls span{font-size:18px;font-weight:700}

/* DRAWER */
.drawer{
 position:fixed;top:0;left:-100%;
 width:100%;height:100%;
 background:#fff;z-index:2000;
 transition:.35s;padding:16px;overflow:auto
}
.drawer.open{left:0}
.drawer h2{text-align:center;margin-bottom:12px}
.drawer-item{display:flex;justify-content:space-between;margin:6px 0;font-size:14px}
.total{font-size:20px;font-weight:900;margin:12px 0}

/* FORM */
.form-group{margin:8px 0}
.form-group input,.form-group select{
 width:100%;padding:10px;
 border-radius:10px;border:1px solid #ccc
}

/* INVOICE */
.invoice{
 background:#f2f2f2;
 border-radius:12px;
 padding:12px;
 margin-top:10px;
 display:none;font-size:14px
}
.invoice.show{display:block}

/* ANNOUNCE */
.announce{
 position:fixed;bottom:20px;left:50%;
 transform:translateX(-50%);
 background:#ff4d00;color:#fff;
 padding:12px 18px;
 border-radius:25px;
 font-weight:700;
 display:none;z-index:3000
}
</style>
</head>

<body>

<header>
<h1>LA MAYORISTA EXPRESS</h1>
<div class="header-row">
<input id="search" placeholder="Buscar productos...">
<select id="currency">
<option value="CUP">CUP</option>
<option value="USD">USD</option>
<option value="MLC">MLC</option>
<option value="TC">Tarjeta ClÃ¡sica</option>
<option value="CRYPTO">Criptomoneda</option>
</select>
<button class="cart-btn" onclick="toggleCart()">ðŸ›’ <span id="cartTotal">0</span></button>
</div>
<div class="marquee">
<span>ðŸ”¥ Precios mayoristas reales â€¢ ðŸšš Entregas rÃ¡pidas â€¢ ðŸ’° Ahorra comprando mÃ¡s â€¢ ðŸ›’ Compra segura</span>
</div>
</header>

<main>
<div class="products" id="products"></div>
</main>

<!-- CART DRAWER -->
<div class="drawer" id="cart">
<h2>Carrito</h2>
<div id="cartItems"></div>
<div class="total" id="cartSum"></div>
<button onclick="clearCart()">Vaciar carrito</button>

<h3>Datos del cliente</h3>
<div class="form-group"><input id="name" placeholder="Nombre completo"></div>
<div class="form-group"><input id="phone" placeholder="TelÃ©fono"></div>
<div class="form-group"><input id="address" placeholder="DirecciÃ³n"></div>
<div class="form-group">
<select id="pay">
<option>Efectivo</option>
<option>Transferencia</option>
<option>MLC</option>
<option>Criptomoneda</option>
</select>
</div>
<div class="form-group">
<select id="delivery">
<option>MensajerÃ­a</option>
<option>Recoger en tienda</option>
</select>
</div>

<button onclick="toggleInvoice()">Ver / Ocultar factura</button>
<div class="invoice" id="invoice"></div>

<button onclick="sendWhatsApp()">Enviar pedido por WhatsApp</button>
<button onclick="toggleCart()">Cerrar</button>
</div>

<div class="announce" id="announce"></div>

<script>
/* TASA */
const rates={CUP:1,USD:495,MLC:410,TC:410,CRYPTO:495};

/* PRODUCTOS EXACTAMENTE 60 */
const products=[
["ðŸš Saco de Arroz (100 lb)","saco",13600],
["ðŸ«˜ Frijol negro","lb",224],
["ðŸ«˜ Frijol colorado","lb",240],
["ðŸ¬ AzÃºcar","lb",184],
["ðŸŒ½ Harina de maÃ­z","lb",120],
["ðŸŒ½ MaÃ­z en grano","lb",112],
["ðŸ Espagueti 500 g","unidad",224],
["ðŸ— Pollo","lb",256],
["ðŸ– Carne de cerdo","lb",520],
["ðŸ¥© Picadillo","lb",320],
["ðŸ¥š CartÃ³n de huevos (30)","cartÃ³n",2240],
["ðŸ¥› Leche en polvo","kg",2800],
["ðŸ§€ Queso blanco","lb",2240],
["ðŸ›¢ï¸ Aceite","litro",560],
["ðŸ§º Detergente polvo","kg",560],
["ðŸ§´ Detergente lÃ­quido","litro",600],
["ðŸ§¼ JabÃ³n de baÃ±o","unidad",200],
["ðŸ§» Papel higiÃ©nico","paquete",704],
["ðŸ§… Cebolla","lb",240],
["ðŸ… Tomate","lb",160],
["ðŸ¥” Papa","lb",160],
["ðŸŒ PlÃ¡tano vianda","lb",96],
["ðŸž Pan","unidad",120],
["ðŸ§‚ Sal","lb",80],
["ðŸ¥• Zanahoria","lb",160],
["ðŸ¥¬ Col","lb",144],
["ðŸŠ Naranja","lb",96],
["ðŸ PiÃ±a","unidad",400],
["ðŸ‰ MelÃ³n","unidad",480],
["ðŸ« Chocolate","unidad",320],
["ðŸª Galletas","paquete",200],
["ðŸ¥« AtÃºn","unidad",560],
["ðŸ¥« Sardinas","unidad",320],
["ðŸ— Muslo de pollo","lb",280],
["ðŸ– Costilla cerdo","lb",560],
["ðŸ„ Carne de res","lb",960],
["ðŸ¥“ Tocino","lb",640],
["ðŸ§½ Esponja","unidad",120],
["ðŸ§´ Cloro","litro",200],
["ðŸ§¼ Shampoo","unidad",600],
["ðŸª¥ Pasta dental","unidad",320],
["ðŸ§º JabÃ³n lavar","lb",240],
["ðŸ§´ Alcohol","litro",400],
["ðŸª£ Cubo plÃ¡stico","unidad",600],
["ðŸ§ƒ Jugo","unidad",240],
["ðŸ¥¤ Refresco","unidad",200],
["ðŸ¯ Miel","unidad",600],
["ðŸ§ˆ Margarina","unidad",320],
["ðŸ§‚ Condimento","unidad",160],
["ðŸš Harina trigo","lb",160],
["ðŸ¥› Leche lÃ­quida","litro",240],
["ðŸ§¼ Suavizante","litro",480],
["ðŸª Dulce seco","paquete",180],
["ðŸ§´ Desodorante","unidad",520],
["ðŸ§» Servilletas","paquete",240]
];

let cart=JSON.parse(localStorage.getItem("cart")||"{}");
let currency=localStorage.getItem("currency")||"CUP";
let invoiceVisible=localStorage.getItem("invoice")=="1";

document.getElementById("currency").value=currency;

/* RENDER */
function render(){
 const list=document.getElementById("products");
 list.innerHTML="";
 products.forEach((p,i)=>{
  if(search.value && !p[0].toLowerCase().includes(search.value.toLowerCase()))return;
  const q=cart[i]||0;
  const d=document.createElement("div");
  d.className="card";
  d.innerHTML=`
  <h3>${p[0]}</h3>
  <small>${p[1]}</small>
  <div class="price">${convert(p[2])}</div>
  <div class="controls">
   <button onclick="add(${i},-1)">âž–</button>
   <span>${q}</span>
   <button onclick="add(${i},1)">âž•</button>
  </div>`;
  list.appendChild(d);
 });
 updateCart();
}

/* CONVERT */
function convert(v){
 if(currency==="CUP")return v+" CUP";
 return (v/rates[currency]).toFixed(2)+" "+currency;
}

/* ADD */
function add(i,d){
 cart[i]=(cart[i]||0)+d;
 if(cart[i]<0)cart[i]=0;
 save();
}

/* SAVE */
function save(){
 localStorage.setItem("cart",JSON.stringify(cart));
 localStorage.setItem("currency",currency);
 localStorage.setItem("invoice",invoiceVisible?1:0);
 render();
}

/* CART */
function updateCart(){
 let sum=0,items="",inv="";
 Object.keys(cart).forEach(i=>{
  if(cart[i]>0){
   const p=products[i];
   const sub=p[2]*cart[i];
   sum+=sub;
   items+=`<div class="drawer-item">${p[0]} x${cart[i]} <span>${convert(sub)}</span></div>`;
   inv+=`${p[0]} | ${cart[i]} x ${convert(p[2])} = ${convert(sub)}\n`;
  }
 });
 const envio=document.getElementById("delivery").value==="MensajerÃ­a"?500:0;
 document.getElementById("cartItems").innerHTML=items;
 document.getElementById("cartSum").innerText="Total: "+convert(sum+envio);
 document.getElementById("cartTotal").innerText=convert(sum+envio);
 document.getElementById("invoice").innerText=
`LA MAYORISTA EXPRESS
Fecha: ${new Date().toLocaleDateString()}

Cliente: ${name.value}
TelÃ©fono: ${phone.value}
DirecciÃ³n: ${address.value}

PRODUCTOS
${inv}

Subtotal: ${convert(sum)}
EnvÃ­o: ${convert(envio)}
TOTAL: ${convert(sum+envio)}

Pago: ${pay.value}
Entrega: ${delivery.value}`;
}

/* UI */
function toggleCart(){cartDiv.classList.toggle("open")}
function clearCart(){cart={};save()}
function toggleInvoice(){invoiceVisible=!invoiceVisible;invoice.classList.toggle("show");save()}

/* WHATSAPP */
function sendWhatsApp(){
 const text=encodeURIComponent(invoice.innerText);
 window.open("https://wa.me/53420021?text="+text,"_blank");
}

/* EVENTS */
search.oninput=render;
currency.onchange=e=>{currency=e.target.value;save()};
["name","phone","address","pay","delivery"].forEach(id=>{
 document.getElementById(id).oninput=save;
});

/* ANNOUNCES */
setInterval(()=>{
 const msgs=[
 "ðŸ”¥ Grandes ofertas mayoristas",
 "ðŸšš Entregas rÃ¡pidas disponibles",
 "ðŸ’° Ahorra comprando al por mayor"
 ];
 announce.innerText=msgs[Math.floor(Math.random()*msgs.length)];
 announce.style.display="block";
 setTimeout(()=>announce.style.display="none",3000);
},[20000,30000,60000][Math.floor(Math.random()*3)]);

/* INIT */
const cartDiv=document.getElementById("cart");
const invoice=document.getElementById("invoice");
if(invoiceVisible)invoice.classList.add("show");
render();

/* SERVICE WORKER */
if("serviceWorker"in navigator){
 const sw=`self.addEventListener('install',e=>self.skipWaiting());self.addEventListener('fetch',e=>{});`;
 navigator.serviceWorker.register(URL.createObjectURL(new Blob([sw],{type:"text/javascript"})));
}
</script>

</body>
</html>
